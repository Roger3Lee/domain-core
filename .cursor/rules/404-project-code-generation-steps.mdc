---
alwaysApply: true
---
# 基于领域驱动设计开发接口的生成代码的步骤
- 步骤1：分析领域模型XML配置，读取domain-*.xml文件理解领域模型结构
- 步骤2：生成或更新DTO类，为每个实体包括中间表生成对应的DTO
- 步骤3：定义Request和Response对象，根据接口需求决定继承DTO还是创建独立类
- 步骤4：设计REST资源路径和标准端点，遵循RESTful API设计原则
- 步骤5：实现Controller层，使用@RestController和@RequestMapping注解
- 步骤6：创建基于Mapstruct的对象映射类Converter,支持spring bean。处理中间表的1:1引用，使用@Mapping注解映射合并的字段
- 步骤7：实现应用服务层，创建AppService和appServiceImpl
- 步骤8：使用领域服务进行数据操作，正确处理LoadFlag控制数据加载范围
- 步骤9：使用@Transactional确保数据一致性
- 步骤10：代码规范检查，验证接口完整性和业务逻辑正确性
- 步骤11：检查生成代码正确性
- 步骤13：所有新增或改动的接口都需要生成测试用curl命令和测试参数，输出一个markdown文档


# 指令

- 完成设计REST资源路径和标准端点后，***等待用户选择*** 后续指令。
  
  ```
  接口定义已经生成，请review代码，并确定是否继续后续？
  确定(Y)  取消(N)
  ```
  
  - 输入 ***Y*** 表明接口设计已经Review通过， 继续后续步骤
  
  - 输入 ***N*** 表明接口设计需要调整，等待用户输入后按要求调整接口设计。
  
  ***重要***：当接口定义发生变化时， 重复上述提示，等待确认后再执行后续操作。